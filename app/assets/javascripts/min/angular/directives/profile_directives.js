homeApp.directive("friendInfo",["$rootScope","userService","sharedService",function(a,b,c){return{restrict:"E",scope:{friend:"=",info:"="},controller:["$scope",function(a){a.render_page=function(a){c.render_page(a)};var d=function(){angular.isDefined(a.friend)&&b.get_user_details(a.friend.id).then(function(b){a.friend=angular.extend(a.friend,b)})};d()}],templateUrl:"/assets/angular/html/shared/partials/friend_info.html"}}]),homeApp.directive("authorInfo",["$rootScope","authorService","ColorConstants","sharedService",function(a,b,c,d){return{restrict:"E",scope:{author:"=",info:"="},controller:["$scope",function(a){a.render_page=function(a){d.render_page(a)};var c=function(){angular.isDefined(a.author)&&b.get_basic_info(a.author.id).then(function(b){a.author=angular.extend(a.author,b)})};c()}],templateUrl:"/assets/angular/html/shared/partials/author_info.html"}}]),homeApp.directive("communityInfo",["$rootScope","newsService","ColorConstants","$mdDialog","sharedService",function(a,b,c,d,e){return{restrict:"E",scope:{community:"=",info:"="},controller:["$scope",function(c){c.render_page=function(a){e.render_page(a)},c.show_book_dialog=function(b,d){e.show_book_dialog(a,c,b,d)};var d=function(){angular.isDefined(c.community)&&b.get_feed_info(c.community.id).then(function(a){c.community=angular.extend(c.community,a)})};d()}],templateUrl:"/assets/angular/html/shared/partials/community_info.html"}}]),homeApp.directive("bookShelf",["$rootScope","roomService","$mdDialog","sharedService",function(a,b,c,d){return{restrict:"E",scope:{shelf:"=",info:"="},controller:["$scope",function(b){b.toggle=function(){b.show_shelf=!b.show_shelf},b.show_indexes=function(a,d){b.book=a,c.show({templateUrl:"assets/angular/html/shared/rating.html",clickOutsideToClose:!0,hasBackdrop:!1,targetEvent:d,scope:b,preserveScope:!0}),d.stopPropagation()},b.add_books_to_shelf=function(c,d){a.active_shelf=c,b.info.show_book_share=!0};var d=function(){1==b.shelf.books.length&&null==b.shelf.books[0].title?b.show_shelf=!1:b.shelf.books.length>0?b.show_shelf=!0:b.show_shelf=!1};d()}],templateUrl:"/assets/angular/html/room/partials/book_shelf.html"}}]),homeApp.directive("articleShelf",["$rootScope","roomService","ColorConstants",function(a,b,c){return{restrict:"E",scope:{shelf:"="},controller:["$scope",function(a){a.toggle=function(){a.show_shelf=!a.show_shelf};var b=function(){1==a.shelf.articles.length&&null==a.shelf.articles[0].title?a.show_shelf=!1:a.shelf.articles.length>0?a.show_shelf=!0:a.show_shelf=!1};b()}],templateUrl:"/assets/angular/html/room/partials/article_shelf.html"}}]),homeApp.directive("articles",["$rootScope","roomService","userService",function(a,b,c){return{restrict:"E",scope:{userId:"="},controller:["$scope",function(d){var e=function(){b.get_visited_articles(d.userId).then(function(a){angular.isUndefined(d.visited_articles)&&(d.visited_articles=[]),d.visited_articles=d.visited_articles.concat(a),d.shelf_loading=!1})};d.show_news=function(b,c){var e=b.news_url||b.url;if(e="https://api.embed.ly/1/extract?key=0038e86d5e754f8d9a0c3823e338563d&url="+e+"&format=json",d.cirular_loading=!0,angular.isUndefined(b.data)&&websiteService.extract_embed(e).then(function(a){d.cirular_loading=!1,b.data=a}),angular.isDefined(a.containers)){var f={url:"read_news",data:b};a.containers.push(f)}else $mdDialog.show({templateUrl:"/assets/angular/html/news/iframe.html",scope:d,preserveScope:!0,clickOutsideToClose:!0,targetEvent:c});c.stopPropagation()};var f=function(){d.shelf_loading=!0,e();var a=function(){var a=getCookie("todo");a&&(a=JSON.parse(a),a.profile.history||(deleteCookie("todo"),c.update_todo_key("profile/history")))};a()};f()}],templateUrl:"/assets/angular/html/room/show.html"}}]),homeApp.directive("articleShelves",["$rootScope","roomService","ColorConstants",function(a,b,c){return{restrict:"E",scope:{userId:"="},controller:["$scope",function(a){var c=function(){b.get_articles_grouped_by_shelves(a.userId).then(function(b){a.articles_grouped_by_shelves=b,a.shelf_loading=!1})},d=function(){a.shelf_loading=!0,c()};d()}],templateUrl:"/assets/angular/html/room/_right_panel.html"}}]),homeApp.directive("bookShelves",["$rootScope","roomService","userService",function(a,b,c){return{restrict:"E",scope:{userId:"="},controller:["$scope",function(a){var d=function(){b.get_books_grouped_by_shelves(a.userId).then(function(b){angular.isUndefined(a.book_shelves)&&(a.book_shelves=[]),a.book_shelves=b,e(),a.shelf_loading=!1})},e=function(){var b=function(a,b){var c=!1,d=0;return angular.forEach(b,function(b,e){a==b.shelf&&(c=!0,d=e)}),{status:c,index:d}},c=[];angular.forEach(a.book_shelves,function(a){var d=b(a.shelf,c);d.status?c[d.index].books.push(a.books[0]):c.push(a)}),a.book_shelves=c},f=function(){a.shelf_loading=!0;var b=function(){var a=getCookie("todo");a&&(a=JSON.parse(a),a.profile.shelves||(deleteCookie("todo"),c.update_todo_key("profile/shelves")))};b(),d()};f()}],templateUrl:"/assets/angular/html/room/_left_panel.html"}}]);