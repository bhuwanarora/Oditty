homeApp.controller("specificBookController",["$scope","$rootScope","$timeout","bookService","$mdToast","$location","$mdSidenav","ColorConstants","$mdBottomSheet","userService",function(a,b,c,d,e,f,g,h,i,j){a.toggle_endorse=function(){k()?g("signup").toggle():(a.book.endorse_status?a.book.endorse_status=!1:a.book.endorse_status=!0,d.endorse_book(b.active_book.book_id,a.book.endorse_status),e.show({controller:"toastController",templateUrl:"assets/angular/html/shared/toast/endorse_action.html",hideDelay:6e3,position:a.getToastPosition()}))},a.hide_bottomsheet=function(a){i.hide()},a.show_todo_list=function(b){i.show({templateUrl:"assets/angular/html/todo/book.html",scope:a,preserveScope:!0,targetEvent:b})};var k=function(){return""==getCookie("logged")||null==getCookie("logged")};a.show_share_bottom_sheet=function(a){g("right_share").toggle()},a.getToastPosition=function(){return Object.keys(a.toast_position).filter(function(b){return a.toast_position[b]}).join(" ")},a.rate_book=function(a){k()?g("signup").toggle():d.rate_book(a.book_id,a.user_rating)},a.load_sample_read=function(){},a.get_active_class=function(a){var b=""==f.path().substr(1,a.length+1)&&"book/buyandreview"==a;return f.path().substr(1,a.length+1)==a||b?"bold red_color":"grey_color"};var l=function(){var e=/[?&]([^=#]+)=([^&#]*)/g,g=e.exec(f.absUrl());if(null!=g)var h=g[2];else if(b.pages)var h=getCookie("id");if(angular.isDefined(b.active_book))if(angular.isDefined(b.active_book.id))var i=b.active_book.id;else var i=b.active_book.book_id;else var i=h;var j="id="+i;a.book_loading=!0;var k=c(function(){a.info.loading=!0,d.get_book_details(j).then(function(c){if(angular.isDefined(c)&&null!=c){var d=null!=c.endorse_status,e=null!=c.status,f={endorse_status:d,status:e};angular.isDefined(b.active_book)?a.book=angular.extend(b.active_book,c):a.book=c,a.book=angular.extend(a.book,f),b.active_book=a.book,a.info.book=a.book}a.book_loading=!1,a.info.loading=!1}),d.update_visited(i)},100);a.$on("destroy",function(){c.cancel(k)}),a.toast_position={bottom:!1,top:!0,left:!1,right:!0},a.is_book=!0,a.constant={show_book:!0}};l()}]);