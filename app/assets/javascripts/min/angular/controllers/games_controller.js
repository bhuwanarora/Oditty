homeApp.controller("gamesController",["$scope","gamesService","$rootScope","$timeout",function(a,b,c,d){a.get_books=function(){angular.isUndefined(a.books)&&(a.books=[]);var c=a.books.length;b.get_books(c).then(function(b){a.books=a.books.concat(b),a.book=a.books[a.active_index]})},a.get_users=function(){angular.isUndefined(a.users)&&(a.users=[]);var c=a.users.length;b.get_users(c).then(function(b){a.users=a.users.concat(b)})},a.start_playing=function(){a.score=0,a.play=!1,delete a.message,a.active_index=0,a.get_books(),a.get_users()},a.next_book=function(){if(a.next)a.next=!1,10==a.active_index?(a.message="Done!",a.done=!0,a.play=!0,a.play_message="Play Again"):(a.active_index=a.active_index+1,delete a.book,a.book=a.books[a.active_index],a.book.user_rating=0);else{a.next=!0,angular.isUndefined(a.book.user_rating)&&(a.book.user_rating=0);var b=Math.abs(a.book.user_rating-a.book.rating);if(a.score=a.score+(10-b)/10,0==b)var c="Perfect";else if(1>b)var c="Excellent";else if(3>b)var c="Good";else if(4>b)var c="Not Bad";else if(7>b)var c="Too Bad";else var c="Don't judge a book by its cover";a.message=c,d(function(){delete a.message},1e3)}};(function(){a.play=!0,a.play_message="Play",a.message="Judge a book by its Cover"})()}]);