homeApp.controller("customiseController",["$scope","$rootScope","$timeout","userService",function(a,b,c,d){a.close_edit_profile=function(c){b.user.compressed_info=!0,a.popular_books=[],c.stopPropagation()},a.stop_propagation=function(a){a.stopPropagation()},a.goto_info_card=function(a){angular.isDefined(a)&&(b.user.profile_status=a),b.user.compressed_info=!1},a.stop_horizontal_scroll=function(a){a.stopPropagation()},a.user_profile_changed=function(a){var b={profile:a.name};d.save_user_info(b)},a.add_book=function(){},a.add_author=function(){},a.set_location=function(){if(b.user.latitude){var a={latitude:b.user.latitude,longitude:b.user.longitude};d.save_user_info(a)}},a.next=function(){var b=function(a){var b=0,c=3,d=!1;return angular.forEach(a,function(a){a.status&&(b+=1)}),b>=c&&(d=!0),d},c=function(){b(a.info.genres)};angular.isDefined(a.data.selectedIndex)?2==a.data.selectedIndex?window.location.href="/infinity":(0==a.data.selectedIndex||(1==a.data.selectedIndex?c():2==a.data.selectedIndex),a.data.selectedIndex=a.data.selectedIndex+1):a.data.selectedIndex=0},a.previous=function(){angular.isDefined(a.data.selectedIndex)?0==a.data.selectedIndex?a.data.selectedIndex=2:a.data.selectedIndex=a.data.selectedIndex-1:a.data.selectedIndex=0};(function(){a.info.loading=!1,d.get_user_details().then(function(a){b.user=a}),a.info.my_profile=!0})()}]);;homeApp.controller("infoController",["$scope","$rootScope","$timeout","userService",function(a,b,c,d){a.set_first_name=function(){if(angular.isDefined(b.user.first_name)&&b.user.first_name.length>0){var a={first_name:b.user.first_name};d.save_user_info(a)}},a.set_last_name=function(){if(angular.isDefined(b.user.last_name)&&b.user.last_name.length>0){var a={last_name:b.user.last_name};d.save_user_info(a)}},a.set_date_of_birth=function(){var a={selectedYear:b.user.selectedYear,selectedMonth:b.user.selectedMonth,selectedDay:b.user.selectedDay};d.save_user_info(a)},a.set_email=function(){if(angular.isDefined(b.user.email)&&b.user.email.length>0){var a={email:b.user.email};d.save_user_info(a)}},a.set_gender=function(){if(b.user.gender){var a={gender:b.user.gender};d.save_user_info(a)}},a.set_init_book_read_count=function(){if(b.user.init_book_read_count){var a={init_book_read_count:b.user.init_book_read_count};d.save_user_info(a)}},a.set_init_book_written_count=function(){if(b.user.init_book_written_count){var a={init_book_written_count:b.user.init_book_written_count};d.save_user_info(a)}},a.set_about=function(){if(b.user.about){var a={about:b.user.about};d.save_user_info(a)}},_get_info_data=function(){d.get_info_data().then(function(b){a.book_counts=b.reading_count_list,a.user_book_count=a.book_counts[0]})},_init=function(){_get_info_data()},_init()}]);;homeApp.controller("genresController",["$scope","$rootScope","$timeout","userService","genreService","WebsiteUIConstants","$mdToast",function(a,b,c,d,e,f,g){a.save_genre=function(a){var b={genre:a.id,status:!0};d.save_user_info(b)},a.remove_genre=function(a){var b={genre:a.id,status:!1};d.save_user_info(b)},a.edit_genres_like=function(){a.goto_info_card(),b.user.profile_status=1,a._get_genres()},a._get_genres=function(){a.info.loading=!0,(angular.isUndefined(a.info.genres)||0==a.info.genres.length)&&(a.info.genres=[],e.get_genres().then(function(b){angular.forEach(b,function(a){var b=0!=a.likes_weight&&null!=a.likes_weight,c=f.GenreAWS+a.root_category_aws_key,d=angular.extend({status:b,url:c},a);this.push(d)},a.info.genres),a.info.loading=!1}))},a.select_genre=function(b){if(b.status){b.status=!1;var c={category_id:b.root_category_id,status:!1}}else{b.status=!0;var c={category_id:b.root_category_id,status:!0}}g.show({controller:"toastController",templateUrl:"assets/angular/html/shared/toast/select_genre.html",hideDelay:6e3,position:a.getToastPosition()}),d.save_user_info(c)},a.getToastPosition=function(){return Object.keys(a.toast_position).filter(function(b){return a.toast_position[b]}).join(" ")},_init=function(){a.toast_position={bottom:!1,top:!0,left:!1,right:!0};var b=c(function(){a._get_genres()},100);a.$on("destroy",function(){c.cancel(b)})},_init()}]);;homeApp.controller("booksController",["$scope","$rootScope","$timeout","bookService","ColorConstants","$mdToast",function(a,b,c,d,e,f){a.books_on_signup=function(){var b=angular.isDefined(a.search_tag)&&angular.isDefined(a.search_tag.book)&&""!=a.search_tag.book;if(!b){a.info.loading=!0;var c=a.popular_books.length,f=!a._loading&&(angular.isUndefined(a.info.search_book)||a.info.search_book.length<1);if(f){a._loading=!0;var g={skip_count:c};g=angular.toJson(g),d.books_on_signup(g).then(function(b){angular.forEach(b,function(a){var b=Math.floor(Math.random()*e.value.length),c="HaveLeftAMarkOnMe"==a.shelf,d=angular.extend(a,{status:c,color:e.value[b]});this.push(d)},a.popular_books),a._loading=!1,a.info.loading=!1})}else angular.isUndefined(a.all_results_found)||!a.all_results_found,a.info.loading=!1}},a.rate_book=function(a){d.rate_book(a.book_id,a.user_rating)},a.mark_as_read=function(b,c){angular.isDefined(b.id)&&(sharedService.bookmark_book(a,b,c,RecommendationUIConstants.InfluentialBooks),sharedService.mark_as_read(a,b,c))},a.select_book=function(b){angular.forEach(a.popular_books,function(a){angular.equals(a,b)&&(angular.equals(b.status,!1)?b.status=!0:b.status=!1,d.handle_influential_books(b.book_id,b.status))}),f.show({controller:"toastController",templateUrl:"assets/angular/html/shared/toast/select_book.html",hideDelay:6e3,position:a.getToastPosition()})},a.getToastPosition=function(){return Object.keys(a.toast_position).filter(function(b){return a.toast_position[b]}).join(" ")},a.reset_books=function(){},a.search_books=function(b){a.info.loading=!0,a.popular_books=[],d.search_books(b,10).then(function(b){a.info.loading=!1,a.did_you_mean=!0,angular.forEach(b,function(a){angular.isUndefined(a.fuzzy)&&this.push(a)},a.popular_books)})},a.edit_books_read=function(){a.goto_info_card(),b.user.profile_status=2,a.books_on_signup()};(function(){angular.isUndefined(a.popular_books)&&(a.popular_books=[]),a.toast_position={bottom:!1,top:!0,left:!1,right:!0};var b=c(function(){a.books_on_signup()},100);a.$on("destroy",function(){c.cancel(b)})})()}]);;homeApp.controller("authorsController",["$scope","$rootScope","$timeout","userService",function(a,b,c,d){a.edit_authors_read=function(){a.goto_info_card(),b.user.profile_status=3,a.get_people()},a.get_people=function(){var b=a.people.length,c=!a._loading;c&&(a._loading=!0,d.get_people(b).then(function(b){angular.forEach(b,function(a){var b={name:a[0]};this.push(b)},a.people),a._loading=!1}))};var e=function(){};e()}]);