homeApp.directive("guestInterview",["$rootScope","authorService","$timeout",function(a,b,c){return{restrict:"E",scope:{author:"=",info:"="},controller:["$scope",function(a){var c=function(){a.info.loading=!0,b.get_interview_details(a.author.id).then(function(b){a.info.loading=!1,a.data=b})};c()}],templateUrl:"/assets/angular/html/author/guest_interview.html"}}]);;homeApp.controller("authorController",["$scope","$location","$mdSidenav","authorService","$mdDialog","ColorConstants","$filter","$sce","$rootScope","WebsiteUIConstants","$timeout","sharedService",function(a,b,c,d,e,f,g,h,i,j,k,l){a.toggle_follow=function(){angular.isDefined(a.author.status)?(a.author.status=!a.author.status,d.follow(a.author.id,a.author.status)):c("signup").toggle()},a.show_more_books=function(){var b=a.author.books.length-a.limit_count;b>8?a.limit_count=a.limit_count+8:(a.hide_show_more=!0,a.limit_count=a.limit_count+b)},a.keypress_scroll=function(b){b.keyCode==j.KeyDown?a.active_index=a.next_block(a.active_index):b.keyCode==j.KeyUp&&(a.active_index=a.previous_block(a.active_index))},a.show_book_dialog=function(b,c){l.show_book_dialog(i,a,b,c)},a.scroll_wiki=function(){},a.toggle_wiki=function(){a.show_author_wiki=!a.show_author_wiki},a.show_authors_nav=function(a){c("authors_detail_sidenav").toggle(),a.stopPropagation()},a.load_books=function(){0==a.data.selectedIndex&&a.get_books()},a.get_books=function(b){if(angular.isUndefined(a.info.loading)||!a.info.loading){var c=function(b){b.indexOf("google")<0?a.author.wiki_url=b:a.author.wiki_url=b.substring(b.lastIndexOf("?q=")+3,b.lastIndexOf("&sa"))};if(angular.isUndefined(b)&&(b=a.author.id),a.info.loading=!0,angular.isDefined(a.author)&&angular.isDefined(a.author.books))var e=a.author.books.length;else var e=0;d.get_details(b,e).then(function(b){if(0==e?a.author=b:(1==b.books.length&&null==b.books[0].title&&(b.books=[]),a.author.books=a.author.books.concat(b.books)),null!=b.wiki_url&&""!=b.wiki_url&&(c(b.wiki_url),a.author.wiki_url=h.trustAsResourceUrl(a.author.wiki_url+"?action=render")),1==a.author.books.length&&null==a.author.books[0].title){a.author.books=[];var d=Math.floor(Math.random()*f.value.length),i=f.value[d];a.custom_style={"background-color":i},a.custom_color=i}else angular.forEach(a.author.books,function(b,c){var d=Math.floor(Math.random()*f.value.length),e=g("large_thumb")(b),h=f.value[d];if(""!=e)var i={color:h,custom_style:{"background-image":"url('"+e+"')"}};else var i={color:h,custom_style:{"background-color":h}};a.author.books[c]=angular.extend(a.author.books[c],i)});a.info.loading=!1})}},a.get_active_class=function(a){var c=""==b.path().substr(1,a.length+1)&&"books"==a;return b.path().substr(1,a.length+1)==a||c?"bold red_color":"grey_color"};(function(){var c=/[?&]([^=#]+)=([^&#]*)/g,d=c.exec(b.absUrl())[2];angular.isUndefined(a.info)&&(a.info={}),a.active_index=0;var e=k(function(){a.get_books(d)},100);a.$on("destroy",function(){k.cancel(e)}),a.limit_count=8})()}]);